services:
  - type: web
    name: sse-bdh-climate-api
    env: python
    region: oregon  # change to frankfurt or singapore if preferred
    plan: starter   # free tier; upgrade to standard for persistent disk

    buildCommand: pip install -r requirements.txt

    startCommand: uvicorn api:app --host 0.0.0.0 --port $PORT

    envVars:
      - key: GROQ_API_KEY
        sync: false          # set this secret in the Render dashboard

      # Optional overrides — remove if happy with defaults
      # - key: REPORTS_DIR
      #   value: /app/reports
      # - key: CHROMA_DIR
      #   value: /app/chroma_db
      # - key: BDH_MODEL_PATH
      #   value: /app/bdh_model.pt
      # - key: ALLOWED_ORIGINS
      #   value: https://your-frontend.vercel.app

    # Disk for persisting ChromaDB and uploaded PDFs across restarts.
    # Only available on paid plans — comment out for free tier.
    # disk:
    #   name: sse-bdh-data
    #   mountPath: /app
    #   sizeGB: 5

    healthCheckPath: /
